(this["webpackJsonpdemo-oslo-bysykkel"]=this["webpackJsonpdemo-oslo-bysykkel"]||[]).push([[0],{115:function(e,a,t){e.exports={logo:"header_logo__N72Li",logoContainer:"header_logoContainer__LWadJ",nav:"header_nav__xbd9O",navBtn:"header_navBtn__aCR78",header:"header_header__3kder"}},321:function(e,a,t){e.exports={container:"app_container__3mR0C"}},322:function(e){e.exports=JSON.parse('{"metadata":{"appName":"Demo Oslo Bysykkel"},"oslobysykkel":{"host":"https://gbfs.urbansharing.com/oslobysykkel.no","endpoints":{"stationStatus":"/station_status.json","stationInformation":"/station_information.json"}}}')},323:function(e,a,t){e.exports={popup:"bikePopup_popup__3dRyL"}},331:function(e,a,t){e.exports={tableContainer:"stationTable_tableContainer__24RL6"}},340:function(e,a,t){e.exports=t(438)},345:function(e,a,t){},347:function(e,a,t){e.exports=t.p+"static/media/bicycle-available.576cfcb7.svg"},349:function(e,a,t){e.exports=t.p+"static/media/bicycle-unavailable.826572b5.svg"},438:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),i=t(14),r=t.n(i),c=(t(345),t(96)),l=t(115),s=t.n(l),u=function(e){var a=e.handleOnClick,t=Object(n.useState)("List"),i=Object(c.a)(t,2),r=i[0],l=i[1];return o.a.createElement("header",{className:s.a.header},o.a.createElement("div",{className:s.a.logoContainer},o.a.createElement("p",{className:s.a.logo},"Demo")),o.a.createElement("div",{className:s.a.nav},o.a.createElement("button",{className:s.a.navBtn,onClick:function(){l("Map"===r?"List":"Map"),a()}},r)))},p=t(321),m=t.n(p),b=t(470),d=t(471),v=t(114),k=t.n(v),f=t(160),_=t(322),h=function(){var e=Object(f.a)(k.a.mark((function e(a){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(a);case 3:if(200===(t=e.sent).status){e.next=6;break}return e.abrupt("return","error");case 6:return e.next=8,t.json();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(0),new Error("Failed to fetch data from: ".concat(a));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(a){return e.apply(this,arguments)}}(),y=function(){var e=Object(n.useState)([]),a=Object(c.a)(e,2),t=a[0],o=a[1],i=Object(n.useState)("LOADING"),r=Object(c.a)(i,2),l=r[0],s=r[1],u=function(e,a){var t=e.map((function(e){var t=e.name,n=e.capacity,o=e.station_id,i=e.lat,r=e.lon,c=a.find((function(e){return o===e.station_id}));return{name:t,capacity:n,num_docks_available:c.num_docks_available,num_bikes_available:c.num_bikes_available,lat:i,lon:r}}));o(t),s("DATA_COLLECTED")};return Object(n.useEffect)((function(){var e=_.oslobysykkel,a=e.host,t=e.endpoints,n=t.stationInformation,o=t.stationStatus;(function(){var e=Object(f.a)(k.a.mark((function e(){var t,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(a+n);case 2:return t=e.sent,e.next=5,h(a+o);case 5:i=e.sent,"error"===t||"error"===i?s("ERROR"):u(t.data.stations,i.data.stations);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(){return console.debug("retrieved data")})).catch((function(){return s("ERROR")}))}),[]),{stations:t,status:l}},g=t(458),E=t(30),O=t.n(E),j=new O.a.Icon({iconUrl:t(347),iconSize:[40,40]}),A=t(65),x=t(323),L=t.n(x),C=t(469),w=function(e){var a=e.name,t=e.bikesAvailable,n=e.docksAvailable,i=e.capacity;return o.a.createElement(C.a,{className:L.a.popup},o.a.createElement("h2",null,a),o.a.createElement("p",null,"".concat(A.bikePopup.bikes,": ").concat(t)),o.a.createElement("p",null,"".concat(A.bikePopup.locks,": ").concat(n)),o.a.createElement("p",null,"".concat(A.bikePopup.capacity,": ").concat(i)))},N=new O.a.Icon({iconUrl:t(349),iconSize:[40,40]}),R=function(e){var a=e.position,t=e.name,n=e.bikesAvailable,i=e.docksAvailable,r=e.capacity;return o.a.createElement(g.a,{position:a,icon:n?j:N},o.a.createElement(w,{name:t,bikesAvailable:n,docksAvailable:i,capacity:r}))},S=function(e){var a=function(e){return e.map((function(e){var a=e.name,t=e.capacity,n=e.num_docks_available,o=e.num_bikes_available;return{position:{lat:e.lat,lng:e.lon},name:a,capacity:t,docksAvailable:n,bikesAvailable:o}}))}(e.stations);return o.a.createElement(o.a.Fragment,null,a.map((function(e){var a=e.position,t=e.name,n=e.capacity,i=e.docksAvailable,r=e.bikesAvailable;return o.a.createElement(R,{key:"".concat(t).concat(a.lng),name:t,position:a,bikesAvailable:r,docksAvailable:i,capacity:n})})))},T=function(){var e=y().stations,a=e[0]?{lat:e[0].lat,lng:e[0].lon}:{lat:0,lng:0};return o.a.createElement(b.a,{center:a,zoom:18,style:{height:"93vh"}},o.a.createElement(d.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),o.a.createElement(S,{stations:e}))},D=t(324),B=t.n(D),I=t(331),P=t.n(I),z=function(e){var a=A.stationTable.status;switch(e){case"LOADING":return a.loading;case"ERROR":return a.error;case"DATA_COLLECTED":return a.dataCollected;default:return""}},J=function(){var e=y(),a=e.stations,t=e.status;return o.a.createElement("div",{className:P.a.tableContainer},o.a.createElement(B.a,{columns:[{title:A.stationTable.name,field:"name"},{title:A.stationTable.availableLocks,field:"num_docks_available",type:"numeric"},{title:A.stationTable.availableBikes,field:"num_bikes_available",type:"numeric"}],localization:{body:{emptyDataSourceMessage:z(t)}},data:a,isLoading:"LOADING"===t,title:A.stationTable.title}))},M=function(){var e=Object(n.useState)(!0),a=Object(c.a)(e,2),t=a[0],i=a[1];return o.a.createElement("div",null,o.a.createElement(u,{handleOnClick:function(){return i(!t)}}),o.a.createElement("main",{className:m.a.container},t?o.a.createElement(T,null):o.a.createElement(J,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e){e.exports=JSON.parse('{"stationTable":{"title":"Oslo Bysykkel stasjoner:","name":"Navn","availableLocks":"Tilgjengelige l\xe5ser","availableBikes":"Tilgjengelige sykler","status":{"loading":"Laster data","error":"Oida, kunne ikke hente data. Pr\xf8v igjen :/","dataCollected":"Ingen data tilgjengelig"}},"bikePopup":{"locks":"L\xe5ser","bikes":"Sykler","capacity":"Kapasitet"}}')}},[[340,1,2]]]);
//# sourceMappingURL=main.3ec1b640.chunk.js.map